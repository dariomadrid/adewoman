// Internationalization configuration
export const defaultLang = 'ca';
export const languages = {
  ca: 'Català',
  es: 'Español'
};

// Translation keys and values
export const translations = {
  ca: {
    // Navigation
    navigation: {
      menu: 'MENÚ',
      adewoman: 'ADEWOMAN',
      sobremi: 'Sobre Mi',
      serveis: 'Serveis',
      opinions: 'QUÈ DIUEN DE NOSALTRES?',
      contacta: 'Contacta',
      online: 'ONLINE (properament)'
    },
    
    // Home page
    home: {
      hero: {
        title: 'AW',
        subtitle: 'FISIOTERÀPIA',
        cta: 'Reserva la teva cita'
      },
      about: {
        title: 'ADEWOMAN FISIOTERÀPIA',
        subtitle: 'FISIOTERÀPIA PER A LA SALUT DE LA DONA.',
        intro: 'Sóc Jéssica González Sánchez, encara que tots em diuen Jess.',
        introDescription1: 'Després de diversos anys treballant per a altres empreses, vaig crear un espai on dones de totes les edats poguessin aprendre a escoltar i cuidar del seu cos.',
        introDescription2: 'Un espai segur, on la comunicació i l\'aprenentatge sobre el cos són claus per a un tractament amb èxit.',
        introConclusion: 'Així neix Adewoman Fisioteràpia.',
      },
      quisoc: {
        title: 'SOBRE MI',
        intro: 'Encara que sempre he patit dolor durant la menstruació, mitjançant medicació i la falta de respostes de professionals, vaig normalitzar que la regla fa mal.',
        introDescription1: 'No va ser fins el 2020 que vaig començar a buscar respostes, ja que la intensitat del dolor va arribar a incapacitar-me provocant-me desmaios.',
        introDescription2: 'Després de diverses visites a diferents ginecòleg/ogues em van diagnosticar adenomiosi i un focus d\'endometriosi. Va ser llavors quan vaig ser conscient de la necessitat de moltes dones, i que havia d\'enfocar el meu treball (la meva passió) a buscar eines per al benestar de totes elles.',
      },
      formacio: {
        title: 'FORMACIÓ',
        items: [
          'DIPLOMADA EN FISIOTERÀPIA',
          'MÀSTER EN REEDUCACIÓ DE SÒL PÈLVIC',
          'OSTEOPATIA',
          'CONCEPTE GDP',
          'FISIOSEXÒLOGA',
          'ACTIVITAT FÍSICA I EXERCICI TERAPÈUTIC EN L\'EMBARÀS',
          'TRACTAMENT DE LA DIÀSTASI',
          'ESCOLA DE L\'ESQUENA: PILATES TERAPÈUTIC, HIPOPRESSIU I EXERCICI FUNCIONAL',
          'CÒLIC DEL LACTANT'
        ]
      },
      elegirnos: {
        title: 'PER QUÈ TRIAR-NOS?',
        description1: 'Viure i entendre el DOLOR, m\'ha ensenyat a connectar a un nivell major amb les meves pacients.',
        description2: 'Conèixer el teu cos i com funciona, és la major eina que et puc proporcionar.',
        description3: 'Poc a poc anirem treballant sobre el problema, i buscarem el tractament que millor s\'adeqüi a les teves necessitats.'
      },
      centro: {
        title: 'CENTRE ESPECIALITZAT',
        description: 'Portem més de 9 anys acompanyant dones en totes les seves etapes.',
        services: [
          'ENDOMETRIOSI / ADENOMIOSI',
          'FERTILITAT I EMBARÀS',
          'DOLOR / DISFUNCIONS SEXUALS',
          'PROLAPSOS',
          'POSTPART',
          'TRACTAMENT CICATRIUS',
          'DISFUNCIONS SÒL PÈLVIC',
          'EXERCICI TERAPÈUTIC',
          'RESPIRACIÓ I CONSCIÈNCIA CORPORAL'
        ]
      },
      opinions: {
        title: 'QUÈ DIUEN DE NOSALTRES?'
      }
    },
        
    // Contact
    contact: {
      title: 'CONTACTA AMB MI',
      form: {
        name: 'El teu nom',
        email: 'El teu correu electrònic',
        message: 'Explica\'m com et puc ajudar...',
        submit: 'Enviar missatge',
        sending: 'Enviant...'
      },
      success: 'Missatge enviat correctament! Et contactaré aviat per programar la teva cita.',
      error: 'Error en enviar el missatge. Si us plau, torna-ho a intentar.',
      findMe: 'O troba\'m a:'
    },
    
    // Footer
    footer: {
      contact: {
        title: 'Contacta\'ns',
        location: 'ON SÓM'
      },
      schedule: {
        title: 'HORARI',
        weekdays: 'Dilluns, Dimarts i Dijous',
        weekdaysTime: '14.00 - 20.00',
        midweek: 'Dimecres i Divendres',
        midweekTime: '8.00 - 15.00',
        weekend: 'Dissabte i Diumenge',
        closed: 'TANCAT'
      },
      services: {
        title: 'Els nostres serveis'
      },
      legal: {
        title: 'LEGAL',
        notice: 'Avís legal',
        privacy: 'Política de privacitat',
        cookies: 'Política de cookies',
        terms: 'Termes i condicions'
      },
      copyright: 'Tots els drets reservats.'
    },    
    
    // Common
    common: {
      loading: 'Carregant...',
      readMore: 'Llegir més',
      backToTop: 'Tornar a dalt',
      close: 'TANCAR',
      next: 'Següent',
      previous: 'Anterior',
      image: 'Imatge',
      of: 'de',
      all: 'Tots'
    }    
  },

  es: {
    // Navigation
    navigation: {
      menu: 'MENÚ',
      adewoman: 'ADEWOMAN',
      sobremi: 'Sobre Mí',
      serveis: 'Servicios',
      opinions: '¿QUÉ CUENTAN DE NOSOTROS?',
      contacta: 'Contacta',
      online: 'ONLINE (próximamente)'
    },
    
    // Home page
    home: {
      hero: {
        title: 'AW',
        subtitle: 'FISIOTERAPIA',
        cta: 'Reserva tu cita'
      },
      about: {
        title:'ADEWOMAN FISIOTERAPIA',
        subtitle: 'FISIOTERAPIA PARA LA SALUD DE LA MUJER.',
        intro: 'Soy Jéssica González Sánchez, aunque todos me llaman Jess.',
        introDescription1: 'Después de varios años trabajando para otras empresas, creé un espacio donde mujeres de todas las edades pudieran aprender a escuchar y cuidar de su cuerpo.',
        introDescription2: 'Un espacio seguro, donde la comunicación y el aprendizaje sobre el cuerpo son claves para un tratamiento con éxito.',
        introConclusion: 'Así nace Adewoman Fisioterapia.',
      },
      quisoc: {
        title:'SOBRE MI',
        intro: 'Aunque siempre he sufrido dolor durante la menstruación, mediante medicación y la falta de respuestas de profesionales, normalicé que la regla duele.',
        introDescription1: 'No fue hasta 2020 que empecé a buscar respuestas, ya que la intensidad del dolor llegó a incapacitarme provocándome desmayos.',
        introDescription2: 'Tras varias visitas a diferentes ginecólogo/as me diagnosticaron adenomiosis y un foco de endometriosis. Fue entonces cuando fui consciente de la necesidad de muchas mujeres, y que debía enfocar mi trabajo (mi pasión) a buscar herramientas para el bienestar de todas ellas.',
      },         
      formacio: {
        title: 'FORMACIÓN',
        items: [
          'DIPLOMADA EN FISIOTERAPIA',
          'MÁSTER EN REEDUCACIÓN DE SUELO PÉLVICO',
          'OSTEOPATÍA',
          'CONCEPTO GDP',
          'FISIOSEXÓLOGA',
          'ACTIVIDAD FÍSICA Y EJERCICIO TERAPÉUTICO EN EL EMBARAZO',
          'TRATAMIENTO DE LA DIÁSTASIS',
          'ESCUELA DE LA ESPALDA: PILATES TERAPÉUTICO, HIPOPRESIVO Y EJERCICIO FUNCIONAL',
          'CÓLICO DEL LACTANTE'
        ]
      },
      elegirnos: {
        title: '¿POR QUÉ ELEGIRNOS?',
        description1: 'Vivir y entender el DOLOR, me ha enseñado a conectar a un nivel mayor con mis pacientes.',
        description2: 'Conocer tu cuerpo y como funciona, es la mayor herramienta que te puedo proporcionar.',
        description3: 'Poco a poco iremos trabajando sobre el problema, y buscaremos el tratamiento que mejor se adecue a tus necesidades.'
      },
      centro: {
        title: 'CENTRO ESPECIALIZADO',
        description: 'Llevamos más de 9 años acompañando a mujeres en todas sus etapas.',
        services: [
          'ENDOMETRIOSIS / ADENOMIOSIS',
          'FERTILIDAD Y EMBARAZO',
          'DOLOR / DISFUNCIONES SEXUALES',
          'PROLAPSOS',
          'POSTPARTO',
          'TRATAMIENTO CICATRICES',
          'DISFUNCIONES SUELO PÉLVICO',
          'EJERCICIO TERAPÉUTICO',
          'RESPIRACIÓN Y CONSCIENCIA CORPORAL'
        ]
      },
      opinions: {
        title: '¿QUÉ CUENTAN DE NOSOTROS?'
      }
    },
        
    // Contact
    contact: {
      title: 'CONTACTA CONMIGO',
      form: {
        name: 'Tu nombre',
        email: 'Tu correo electrónico',
        message: 'Cuéntame cómo puedo ayudarte...',
        submit: 'Enviar mensaje',
        sending: 'Enviando...'
      },
      success: '¡Mensaje enviado correctamente! Te contactaré pronto para programar tu cita.',
      error: 'Error al enviar el mensaje. Por favor, inténtalo de nuevo.',
      findMe: 'O encuéntrame en:'
    },
    
    // Footer
    footer: {
      contact: {
        title: 'Contáctanos',
        location: 'DÓNDE ESTAMOS'
      },
      schedule: {
        title: 'HORARIO',
        weekdays: 'Lunes, Martes y Jueves',
        weekdaysTime: '14.00 - 20.00',
        midweek: 'Miércoles y Viernes',
        midweekTime: '8.00 - 15.00',
        weekend: 'Sábado y Domingo',
        closed: 'CERRADO'
      },
      services: {
        title: 'Nuestros servicios'
      },
      legal: {
        title: 'LEGAL',
        notice: 'Aviso legal',
        privacy: 'Política de privacidad',
        cookies: 'Política de cookies',
        terms: 'Términos y condiciones'
      },
      copyright: 'Todos los derechos reservados.'
    },    
    
    // Common
    common: {
      loading: 'Cargando...',
      readMore: 'Leer más',
      backToTop: 'Volver arriba',
      close: 'CERRAR',
      next: 'Siguiente',
      previous: 'Anterior',
      image: 'Imagen',
      of: 'de',
      all: 'Todos'
    }    
  }
};

// Helper functions
export function useTranslations(lang = defaultLang) {
  return translations[lang] || translations[defaultLang];
}

export function t(key, lang = null) {
  const currentLang = lang || getCurrentLang();
  const keys = key.split('.');
  let result = translations[currentLang] || translations[defaultLang];
  
  for (const k of keys) {
    result = result?.[k];
  }
  
  return result || key;
}

export function getLanguageFromUrl(url) {
  const [, lang] = url.pathname.split('/');
  if (lang in languages) return lang;
  return defaultLang;
}

export function localizedUrl(url, lang) {
  // Always prefix with language since Astro config uses prefixDefaultLocale: true
  return `/${lang}${url}`;
}

export function getAlternateLanguages(currentLang) {
  return Object.keys(languages).filter(lang => lang !== currentLang);
}

// Client-side language detection and management
export function getCurrentLang() {
  if (typeof window === 'undefined') return defaultLang;
  
  // Try to get from URL first
  const urlLang = getLanguageFromUrl(window.location);
  if (urlLang !== defaultLang) return urlLang;
  
  // Try to get from localStorage
  const saved = localStorage.getItem('preferred-language');
  if (saved && saved in languages) return saved;
  
  // Fall back to browser language
  const browserLang = navigator.language.split('-')[0];
  if (browserLang in languages) return browserLang;
  
  return defaultLang;
}

export function switchToLanguage(lang) {
  if (typeof window === 'undefined') return;
  
  if (lang in languages) {
    localStorage.setItem('preferred-language', lang);
  }
}

export function getLocalizedUrl(path, lang = null) {
  const targetLang = lang || getCurrentLang();
  return localizedUrl(path, targetLang);
}

export default { translations, useTranslations, t, languages, defaultLang };